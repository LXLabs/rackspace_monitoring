#
# CHEF MANAGED FILE: DO NOT EDIT
# Generated by Chef for <%= node['hostname'] %>
# Controlling Cookbook: <%=  @cookbook %>
#
type: remote.ping
label: Remote ping check on <%= @target_hostname %>
disabled: <%= @disabled %>
period: <%= @period.to_i %>
timeout: <%= @timeout.to_i %>
target_hostname: <%= @target_hostname %>
monitoring_zones_poll:
  - mzdfw
  - mzord
  - mziad
details:
  <% @variables.each do |param,value| %>
  <%= param -%>: <%= value %>
  <% end %>
<% if @alarm == true %>
alarms:
  ping-check:
    label: Remote Ping check on <%= @target_hostname %>
    notification_plan_id: npTechnicalContactsEmail
    criteria: |
      if (metric['available'] < <%= @critical.to_i %> ) {
        return new AlarmStatus(CRITICAL, 'Ping success is bellow #{available}%, above your critical threshold of <%= @critical.to_i %>%');
      }
<% end %>
